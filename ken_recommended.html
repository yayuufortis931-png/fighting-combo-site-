<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ケンおすすめコンボ</title>
<style>
body { 
  font-family: Arial, sans-serif; 
  padding: 20px; 
  background: #f9f9f9; 
  margin: 0;
}

/* 戻るボタン */
.back-buttons { 
  margin-bottom: 20px; 
  text-align: center; 
}
.back-buttons button {
  margin: 0 5px;
  padding: 6px 12px;
  border: none;
  border-radius: 5px;
  background: #888;
  color: #fff;
  cursor: pointer;
}

/* コンボ表示 */
.combo-row-wrapper {
  display: flex;
  align-items: flex-start;
  gap: 12px; 
  margin-bottom: 25px;
  flex-wrap: wrap; /* スマホでも折り返し */
}
.combo-card {
  background: #f0f0f0;
  border-radius: 12px;
  padding: 15px;
  flex: 1;
  display: flex;
  flex-direction: column;
  box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}
.combo-title { 
  font-weight: bold; 
  font-size: 16px; 
  margin-bottom: 10px; 
}
.moves-container { 
  display: flex; 
  flex-wrap: wrap; 
  gap: 10px;
}
.moves-container img { 
  width: 120px; 
  height: 120px; 
  object-fit: contain; 
  border-radius: 8px; 
  background: #f9f9f9; 
}

/* スマホ対応 */
@media (max-width: 480px) {
  .combo-row-wrapper { flex-direction: column; }
}
</style>
</head>
<body>

<!-- ページ上部広告（ページマッチ） -->
<div id="ad-top">
<script type="text/javascript">
rakuten_design="slide";
rakuten_affiliateId="1e419771.05d3cae2.1e419772.c9642a45";
rakuten_items="ctsmatch";
rakuten_genreId="0";
rakuten_size="728x90";
rakuten_target="_blank";
rakuten_theme="gray";
rakuten_border="off";
rakuten_auto_mode="on";
rakuten_genre_title="off";
rakuten_recommend="on";
rakuten_ts="1758815505294";
</script>
<script type="text/javascript" src="https://xml.affiliate.rakuten.co.jp/widget/js/rakuten_widget.js?20230106"></script>
</div>

<!-- ページ内容 -->
<div id="main-content">
<h2>ケンおすすめコンボ</h2>

<div class="back-buttons">
  <button onclick="location.href='index.html'">🏠 トップへ戻る</button>
  <button onclick="location.href='ken.html'">✏️ コンボ管理ページへ戻る</button>
</div>

<div id="combo-display"></div>
</div>

<!-- ページ下部広告（ランキング） -->
<div id="ad-bottom">
<script type="text/javascript">
rakuten_design="slide";
rakuten_affiliateId="1e419771.05d3cae2.1e419772.c9642a45";
rakuten_items="ranking";
rakuten_genreId="0";
rakuten_size="728x90";
rakuten_target="_blank";
rakuten_theme="gray";
rakuten_border="off";
rakuten_auto_mode="on";
rakuten_genre_title="off";
rakuten_recommend="on";
rakuten_ts="1758815521296";
</script>
<script type="text/javascript" src="https://xml.affiliate.rakuten.co.jp/widget/js/rakuten_widget.js?20230106"></script>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.5.0/firebase-app.js";
import { getFirestore, doc, onSnapshot } from "https://www.gstatic.com/firebasejs/10.5.0/firebase-firestore.js";

// Firebase 設定
const firebaseConfig = {
  apiKey: "AIzaSyAD4fyc-1VlEEGGO631hhpZqCOqllrQ3og",
  authDomain: "st6-combo-maker.firebaseapp.com",
  projectId: "st6-combo-maker",
  storageBucket: "st6-combo-maker.firebasestorage.app",
  messagingSenderId: "945906359459",
  appId: "1:945906359459:web:59a955b609426cf2893316",
  measurementId: "G-YVFY7H6N9E"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
const comboDisplay = document.getElementById("combo-display");

// ケン用ドキュメント
const docRef = doc(db, "combos", "ケン");

// リアルタイム取得
onSnapshot(docRef, (docSnap) => {
  comboDisplay.innerHTML = "";
  if (docSnap.exists()) {
    const rows = docSnap.data().rows || [];
    rows.forEach((r) => {
      const wrapper = document.createElement("div");
      wrapper.className = "combo-row-wrapper";

      // コンボカード
      const card = document.createElement("div");
      card.className = "combo-card";

      const title = document.createElement("div");
      title.className = "combo-title";
      title.textContent = r.title;
      card.appendChild(title);

      const movesContainer = document.createElement("div");
      movesContainer.className = "moves-container";

      r.moves.forEach(mv => {
        const img = document.createElement("img");
        img.src = `images/ken/${mv}.png`;
        img.alt = mv;
        movesContainer.appendChild(img);
      });

      card.appendChild(movesContainer);
      wrapper.appendChild(card);

      comboDisplay.appendChild(wrapper);
    });
  } else {
    comboDisplay.innerHTML = "<p>おすすめコンボがまだ登録されていません。</p>";
  }
});
</script>

</body>
</html>
