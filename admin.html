<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>Admin - ã‚³ãƒ³ãƒœç®¡ç†</title>
<style>
body { font-family: Arial, sans-serif; padding: 20px; }
#char-select { margin-bottom: 20px; }
#combo-area { margin-top: 20px; }
.combo-row { margin-bottom: 25px; padding: 10px; border: 2px solid #666; border-radius: 8px; background: #f0f0f0; position: relative; cursor: grab; }
.row-header { display: flex; justify-content: space-between; align-items: center; gap: 10px; margin-bottom: 8px; }
.row-title { font-weight: bold; font-size: 16px; padding: 5px; flex: 1; }
.row-delete-btn, .row-duplicate-btn { border: none; border-radius: 5px; padding: 4px 8px; cursor: pointer; flex-shrink: 0; }
.row-delete-btn { background:red; color:white; }
.row-duplicate-btn { background:orange; color:white; }
.controls { margin: 10px 0; }
.image-container { display: flex; gap: 10px; flex-wrap: wrap; position: relative; }
.image-box { position: relative; width: 120px; height: 120px; border: 2px solid #ccc; border-radius: 8px; overflow: hidden; background: #f9f9f9; cursor: grab; }
.image-box img { width: 120px; height: 120px; object-fit: contain; }
.delete-btn { position: absolute; top:5px; right:5px; width:25px; height:25px; border-radius:50%; border:none; background:gray; color:white; cursor:pointer; }
.drag-guide { width:4px; background:#007bff; position:absolute; top:0; height:100%; z-index:1000; display:none; }
.row-drag-guide { height:4px; background:#ff6600; width:100%; position:absolute; left:0; z-index:1000; display:none; }
</style>
</head>
<body>
<h2>Admin - ã‚³ãƒ³ãƒœç®¡ç†</h2>

<label for="char-select">ã‚­ãƒ£ãƒ©é¸æŠ:</label>
<select id="char-select"></select>
<button id="add-row-btn">ï¼‹ æ®µã‚’è¿½åŠ </button>
<button id="save-firestore-btn">ğŸ’¾ Firestoreä¿å­˜</button>

<div id="combo-area"></div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.5.0/firebase-app.js";
import { getFirestore, doc, setDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/10.5.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyAD4fyc-1VlEEGGO631hhpZqCOqllrQ3og",
  authDomain: "st6-combo-maker.firebaseapp.com",
  projectId: "st6-combo-maker",
  storageBucket: "st6-combo-maker.firebasestorage.app",
  messagingSenderId: "945906359459",
  appId: "1:945906359459:web:59a955b609426cf2893316",
  measurementId: "G-YVFY7H6N9E"
};
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const charSelect = document.getElementById("char-select");
const comboArea = document.getElementById("combo-area");
const addRowBtn = document.getElementById("add-row-btn");
const saveFirestoreBtn = document.getElementById("save-firestore-btn");

let characters = ["ãƒ«ãƒ¼ã‚¯","ã‚¸ã‚§ã‚¤ãƒŸãƒ¼","ãƒãƒãƒ³","ã‚­ãƒ³ãƒãƒªãƒ¼","ãƒãƒªãƒ¼ã‚¶","ãƒªãƒªãƒ¼","JP","ã‚¸ãƒ¥ãƒª","DJ","ã‚­ãƒ£ãƒŸã‚£","ãƒªãƒ¥ã‚¦","æœ¬ç”°","ãƒ–ãƒ©ãƒ³ã‚«","ã‚¬ã‚¤ãƒ«","ã‚±ãƒ³","æ˜¥éº—","ã‚¶ãƒ³ã‚®ã‚¨ãƒ•","ãƒ€ãƒ«ã‚·ãƒ ","ãƒ©ã‚·ãƒ¼ãƒ‰","AKI","ã‚¨ãƒ‰","è±ªé¬¼","ãƒ™ã‚¬","ãƒ†ãƒªãƒ¼","èˆ","ã‚¨ãƒ¬ãƒŠ","ã‚µã‚¬ãƒƒãƒˆ","ãƒ´ã‚¡ã‚¤ãƒ‘ãƒ¼","ã‚¢ãƒ¬ãƒƒã‚¯ã‚¹","ã‚¤ãƒ³ã‚°ãƒªãƒƒãƒ‰"];
let moveListMap = {};
let rowCount = 0;
let currentChar = characters[0];
let imageMap = {};

const charFolderMap = {
  "ãƒ«ãƒ¼ã‚¯": "luke","ã‚¸ã‚§ã‚¤ãƒŸãƒ¼": "jamie","ãƒãƒãƒ³": "manon","ã‚­ãƒ³ãƒãƒªãƒ¼": "kimberly","ãƒãƒªãƒ¼ã‚¶": "marisa","ãƒªãƒªãƒ¼": "lily","JP": "jp",
  "ã‚¸ãƒ¥ãƒª": "juri","DJ": "dj","ã‚­ãƒ£ãƒŸã‚£": "cammy","ãƒªãƒ¥ã‚¦": "ryu","æœ¬ç”°": "honda","ãƒ–ãƒ©ãƒ³ã‚«": "blanka","ã‚¬ã‚¤ãƒ«": "guile","ã‚±ãƒ³": "ken","æ˜¥éº—": "chunli",
  "ã‚¶ãƒ³ã‚®ã‚¨ãƒ•": "zangief","ãƒ€ãƒ«ã‚·ãƒ ": "dhalsim","ãƒ©ã‚·ãƒ¼ãƒ‰": "rashid","AKI": "aki","ã‚¨ãƒ‰": "ed","è±ªé¬¼": "gouki","ãƒ™ã‚¬": "vega","ãƒ†ãƒªãƒ¼": "terry",
  "èˆ": "mai","ã‚¨ãƒ¬ãƒŠ": "elena","ã‚µã‚¬ãƒƒãƒˆ": "sagat","ãƒ´ã‚¡ã‚¤ãƒ‘ãƒ¼": "viper","ã‚¢ãƒ¬ãƒƒã‚¯ã‚¹": "alex","ã‚¤ãƒ³ã‚°ãƒªãƒƒãƒ‰": "ingrid"
};

// ã“ã“ã« moveListMap ã‚’æ—¢å­˜ã‚³ãƒ¼ãƒ‰é€šã‚Šã«è¿½åŠ ï¼ˆçœç•¥ï¼‰
   moveListMap["ãƒªãƒ¥ã‚¦"] = ["5å¼±P","2å¼±P","5å¼±K","2å¼±K",
  "5ä¸­P","6ä¸­P","2ä¸­P","5ä¸­K","2ä¸­K",
  "5å¼·P","4å¼·P","6å¼·P","2å¼·P","5å¼·K","4å¼·K","6å¼·K","2å¼·K",
  "ä¸ç ´ä¸‰é€£æ’ƒ","ä¸Šæ®µäºŒé€£æ’ƒ",
  "å¼±æ³¢å‹•æ‹³","ä¸­æ³¢å‹•æ‹³","å¼·æ³¢å‹•æ‹³","ODæ³¢å‹•æ‹³",
  "å¼±æ˜‡é¾æ‹³","ä¸­æ˜‡é¾æ‹³","å¼·æ˜‡é¾æ‹³","ODæ˜‡é¾æ‹³",
  "å¼±ä¸Šæ®µè¶³åˆ€è¹´ã‚Š","ä¸­ä¸Šæ®µè¶³åˆ€è¹´ã‚Š","å¼·ä¸Šæ®µè¶³åˆ€è¹´ã‚Š","ODä¸Šæ®µè¶³åˆ€è¹´ã‚Š",
  "å¼±æ³¢æŒæ’ƒ","ä¸­æ³¢æŒæ’ƒ","å¼·æ³¢æŒæ’ƒ","ODæ³¢æŒæ’ƒ",
  "å¼±ç«œå·»æ—‹é¢¨è„š","ä¸­ç«œå·»æ—‹é¢¨è„š","å¼·ç«œå·»æ—‹é¢¨è„š","ODç«œå·»æ—‹é¢¨è„š","ç©ºä¸­ç«œå·»æ—‹é¢¨è„š",
  "é›»åˆƒéŒ¬æ°—",
  "SA1","SA2","SA3",
  "ãƒ‰ãƒ©ã‚¤ãƒ–ãƒ©ãƒƒã‚·ãƒ¥","cDR","ãƒ‰ãƒ©ã‚¤ãƒ–ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆ","æŠ•ã’","ã‚¸ãƒ£ãƒ³ãƒ—","å‰ã‚¹ãƒ†ãƒƒãƒ—","ãƒ‡ã‚£ãƒ¬ã‚¤",
  "Jå¼±P","Jä¸­P","Jå¼·P","Jå¼±K","Jä¸­K","Jå¼·K","ã“ã“ã¾ã§1ã‚³ãƒ³ãƒœ"];
moveListMap["ã‚µã‚¬ãƒƒãƒˆ"] = [
    "5å¼±P","2å¼±P","5å¼±K","6å¼±K","2å¼±K",
  "5ä¸­P","6ä¸­P","2ä¸­P","5ä¸­K","2ä¸­K",
  "5å¼·P","4å¼·P","2å¼·P","5å¼·K","5å¼·K(1æ®µç›®)","6å¼·K","2å¼·K",
  "2ä¸­Pï¼2å¼·P","2ä¸­Pï¼2å¼·K","5ä¸­Kï¼5å¼·K","5ä¸­Pï¼5å¼·K",
  "å¼±ã‚¿ã‚¤ã‚¬ãƒ¼ã‚·ãƒ§ãƒƒãƒˆ","ä¸­ã‚¿ã‚¤ã‚¬ãƒ¼ã‚·ãƒ§ãƒƒãƒˆ","å¼·ã‚¿ã‚¤ã‚¬ãƒ¼ã‚·ãƒ§ãƒƒãƒˆ","ODä¸Šã‚¿ã‚¤ã‚¬ãƒ¼ã‚·ãƒ§ãƒƒãƒˆ","ODä¸‹ã‚¿ã‚¤ã‚¬ãƒ¼ã‚·ãƒ§ãƒƒãƒˆ",
  "å¼±ã‚¿ã‚¤ã‚¬ãƒ¼ã‚¢ãƒ‘ã‚«","ä¸­ã‚¿ã‚¤ã‚¬ãƒ¼ã‚¢ãƒ‘ã‚«","å¼·ã‚¿ã‚¤ã‚¬ãƒ¼ã‚¢ãƒ‘ã‚«","æºœã‚ã‚¢ãƒ‘ã‚«","ODã‚¿ã‚¤ã‚¬ãƒ¼ã‚¢ãƒ‘ã‚«",
  "å¼±ã‚¿ã‚¤ã‚¬ãƒ¼ãƒ‹ãƒ¼","ä¸­ã‚¿ã‚¤ã‚¬ãƒ¼ãƒ‹ãƒ¼","å¼·ã‚¿ã‚¤ã‚¬ãƒ¼ãƒ‹ãƒ¼","ODã‚¿ã‚¤ã‚¬ãƒ¼ãƒ‹ãƒ¼",
  "å¼±ã‚¿ã‚¤ã‚¬ãƒ¼ãƒã‚¯ã‚µã‚¹","ä¸­ã‚¿ã‚¤ã‚¬ãƒ¼ãƒã‚¯ã‚µã‚¹","å¼·ã‚¿ã‚¤ã‚¬ãƒ¼ãƒã‚¯ã‚µã‚¹","ODã‚¿ã‚¤ã‚¬ãƒ¼ãƒã‚¯ã‚µã‚¹",
  "å¼±æ´¾ç”Ÿ","ä¸­æ´¾ç”Ÿ","å¼·æ´¾ç”Ÿ",
  "SA1","SA2","SA3",
  "ãƒ‰ãƒ©ã‚¤ãƒ–ãƒ©ãƒƒã‚·ãƒ¥","cDR","ãƒ‰ãƒ©ã‚¤ãƒ–ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆ","æŠ•ã’","ã‚¸ãƒ£ãƒ³ãƒ—","å‰ã‚¹ãƒ†ãƒƒãƒ—","ãƒ‡ã‚£ãƒ¬ã‚¤",
  "Jå¼±P","Jä¸­P","Jå¼·P","Jå¼±K","Jä¸­K","Jå¼·K","ã“ã“ã¾ã§1ã‚³ãƒ³ãƒœ"];
moveListMap["AKI"] = ["5å¼±P","2å¼±P","5å¼±K","2å¼±K",
      "5ä¸­P","3ä¸­P","2ä¸­P","5ä¸­K","2ä¸­K",
      "5å¼·P","6å¼·P","2å¼·P","5å¼·K","6å¼·K","2å¼·K",
      "5å¼±P5å¼±P","5å¼·P5å¼·P",
      "å¼±ç´«ç…™ç ²","ä¸­ç´«ç…™æ³‰","å¼·ç´«ç…™æ’’","ODç´«ç…™ç ²","ç´«ç…™è¿½",
      "å¼±å‡¶è¥²çª","ä¸­å‡¶è¥²çª","å¼·å‡¶è¥²çª","ODå‡¶è¥²çª",
      "å¼±è›‡é ­é­","ä¸­è›‡é ­é­","å¼·è›‡é ­é­","ODè›‡é ­é­",
      "å¼±è›‡è»½åŠŸ","ä¸­è›‡è»½åŠŸ","å¼·è›‡è»½åŠŸ","ODè›‡è»½åŠŸ",
      "çŒ›æ¯’ç‰™","è›‡é€£å’¬","é›å­—æ¦",
      "SA1","SA2","SA3",
      "ãƒ‰ãƒ©ã‚¤ãƒ–ãƒ©ãƒƒã‚·ãƒ¥","cDR","ãƒ‰ãƒ©ã‚¤ãƒ–ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆ","æŠ•ã’","ã‚¸ãƒ£ãƒ³ãƒ—","å‰ã‚¹ãƒ†ãƒƒãƒ—","ãƒ‡ã‚£ãƒ¬ã‚¤",
      "Jå¼±P","Jä¸­P","Jå¼·P","Jå¼±K","Jä¸­K","Jå¼·K","ã“ã“ã¾ã§1ã‚³ãƒ³ãƒœ"];
moveListMap["ãƒ«ãƒ¼ã‚¯"] = ["5å¼±P", "2å¼±P", "æ³¢å‹•æ‹³", "æ˜‡é¾æ‹³", "ç«œå·»æ—‹é¢¨è„š"];
moveListMap["ã‚¸ã‚§ã‚¤ãƒŸãƒ¼"] = ["5å¼±P","2å¼±P","5å¼±K","2å¼±K",
  "5ä¸­P","2ä¸­P","5ä¸­K","6ä¸­K","2ä¸­K","2KK",
  "5å¼·P","4å¼·P","2å¼·P","5å¼·K","6å¼·K","2å¼·K",
  "2å¼·Kï¼2å¼·K","2å¼·Kï¼2å¼·Kï¼P","5å¼±Pï¼5å¼±Kï¼5ä¸­P","4å¼·Pï¼5å¼·Pï¼5å¼·K","6å¼·Kï¼4å¼·Kï¼P",
  "å¼±æµé…”æ‹³","ä¸­æµé…”æ‹³","å¼·æµé…”æ‹³","ODæµé…”æ‹³",
  "æµé…”æ‹³æ´¾ç”Ÿ","æµé…”æ‹³æ´¾ç”Ÿ2æ®µç›®","æµé…”è„šæ´¾ç”Ÿ","æµé…”è„šæ´¾ç”Ÿ2æ®µç›®",
  "å¼±é…”ç–¾æ­©","ä¸­é…”ç–¾æ­©","å¼·é…”ç–¾æ­©","ODé…”ç–¾æ­©","ç–¾æ­©ä»™æŒ",
  "å¼±å¼µå¼“è…¿","ä¸­å¼µå¼“è…¿","å¼·å¼µå¼“è…¿","ODå¼µå¼“è…¿",
  "å¼±çˆ†å»»","ä¸­çˆ†å»»","å¼·çˆ†å»»","ODçˆ†å»»",
  "å¼±ç„¡å½±è¹´","ä¸­ç„¡å½±è¹´","å¼·ç„¡å½±è¹´","ODç„¡å½±è¹´",
  "ç‚¹è¾°","ODç‚¹è¾°",
  "SA1","SA2","SA3",
  "ãƒ‰ãƒ©ã‚¤ãƒ–ãƒ©ãƒƒã‚·ãƒ¥","cDR","ãƒ‰ãƒ©ã‚¤ãƒ–ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆ","æŠ•ã’","ã‚¸ãƒ£ãƒ³ãƒ—","å‰ã‚¹ãƒ†ãƒƒãƒ—","ãƒ‡ã‚£ãƒ¬ã‚¤",
  "Jå¼±P","Jä¸­P","Jå¼·P","Jå¼±K","Jä¸­K","Jå¼·K","ã“ã“ã¾ã§1ã‚³ãƒ³ãƒœ"];
moveListMap["ãƒãƒãƒ³"] = ["5å¼±P","2å¼±P","5å¼±K","2å¼±K",
  "5ä¸­P","2ä¸­P","5ä¸­K","4ä¸­K","2ä¸­K",
  "5å¼·P","4å¼·P","2å¼·P","5å¼·K","2å¼·K","3å¼·K",
  "5ä¸­Pï¼5ä¸­K","4ä¸­Kï¼5ä¸­K","5å¼·Pï¼5å¼·P","2å¼·Pï¼5å¼·P",
  "å¼±ãƒãƒãƒ¼ã‚¸ãƒ¥ãƒ»ãƒ‰ãƒ¬","ä¸­ãƒãƒãƒ¼ã‚¸ãƒ¥ãƒ»ãƒ‰ãƒ¬","å¼·ãƒãƒãƒ¼ã‚¸ãƒ¥ãƒ»ãƒ‰ãƒ¬","ODãƒãƒãƒ¼ã‚¸ãƒ¥ãƒ»ãƒ‰ãƒ¬",
  "å¼±ãƒ­ãƒ³ãƒ»ãƒãƒ¯ãƒ³","ä¸­ãƒ­ãƒ³ãƒ»ãƒãƒ¯ãƒ³","å¼·ãƒ­ãƒ³ãƒ»ãƒãƒ¯ãƒ³","ODãƒ­ãƒ³ãƒ»ãƒãƒ¯ãƒ³",
  "å¼±ãƒ‡ã‚¬ã‚¸ã‚§","ä¸­ãƒ‡ã‚¬ã‚¸ã‚§","å¼·ãƒ‡ã‚¬ã‚¸ã‚§","ODãƒ‡ã‚¬ã‚¸ã‚§",
  "å¼±ãƒ©ãƒ³ãƒ´ã‚§ãƒ«ã‚»","ä¸­ãƒ©ãƒ³ãƒ´ã‚§ãƒ«ã‚»","å¼·ãƒ©ãƒ³ãƒ´ã‚§ãƒ«ã‚»","ODãƒ©ãƒ³ãƒ´ã‚§ãƒ«ã‚»","ã‚°ãƒ©ãƒ³ãƒ»ãƒ•ã‚§ãƒƒãƒ†","ODã‚°ãƒ©ãƒ³ãƒ»ãƒ•ã‚§ãƒƒãƒ†",
  "SA1","SA2","SA3",
  "ãƒ‰ãƒ©ã‚¤ãƒ–ãƒ©ãƒƒã‚·ãƒ¥","cDR","ãƒ‰ãƒ©ã‚¤ãƒ–ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆ","æŠ•ã’","ã‚¸ãƒ£ãƒ³ãƒ—","å‰ã‚¹ãƒ†ãƒƒãƒ—","ãƒ‡ã‚£ãƒ¬ã‚¤",
  "Jå¼±P","Jä¸­P","Jå¼·P","Jå¼±K","Jä¸­K","Jå¼·K","ã“ã“ã¾ã§1ã‚³ãƒ³ãƒœ"];
moveListMap["ã‚­ãƒ³ãƒãƒªãƒ¼"] = ["5å¼±P", "2å¼±P", "æ³¢å‹•æ‹³", "æ˜‡é¾æ‹³", "ç«œå·»æ—‹é¢¨è„š"];
moveListMap["ãƒãƒªãƒ¼ã‚¶"] = ["5å¼±P","2å¼±P","5å¼±K","2å¼±K",
  "5ä¸­P","6ä¸­P","2ä¸­P","5ä¸­K","2ä¸­K",
  "5å¼·P","4å¼·P","2å¼·P","3å¼·P","5å¼·K","6å¼·K","2å¼·K",
  "5å¼±Pï¼5å¼±P","5ä¸­Pï¼5ä¸­P","5å¼·Pï¼5å¼·P","6ä¸­Pï¼5å¼·P","6ä¸­Pï¼5å¼·K","6å¼·Kï¼6å¼·K",
  "å¼±ã‚°ãƒ©ãƒ‡ã‚£ã‚¦ã‚¹","ä¸­ã‚°ãƒ©ãƒ‡ã‚£ã‚¦ã‚¹","å¼·ã‚°ãƒ©ãƒ‡ã‚£ã‚¦ã‚¹","ODã‚°ãƒ©ãƒ‡ã‚£ã‚¦ã‚¹",
  "å¼±ãƒ‡ã‚£ãƒã‚«ã‚¤ãƒ«ã‚¹","ä¸­ãƒ‡ã‚£ãƒã‚«ã‚¤ãƒ«ã‚¹","å¼·ãƒ‡ã‚£ãƒã‚«ã‚¤ãƒ«ã‚¹","ODãƒ‡ã‚£ãƒã‚«ã‚¤ãƒ«ã‚¹","ãƒ‡ã‚£ãƒã‚«ã‚¤ãƒ«ã‚¹æ´¾ç”Ÿ",
  "å¼±ãƒ•ã‚¡ãƒ©ãƒ³ã‚¯ã‚¹","ä¸­ãƒ•ã‚¡ãƒ©ãƒ³ã‚¯ã‚¹","å¼·ãƒ•ã‚¡ãƒ©ãƒ³ã‚¯ã‚¹","ODãƒ•ã‚¡ãƒ©ãƒ³ã‚¯ã‚¹",
  "å¼±ã‚¯ã‚¢ãƒ‰ãƒªã‚¬","ä¸­ã‚¯ã‚¢ãƒ‰ãƒªã‚¬","å¼·ã‚¯ã‚¢ãƒ‰ãƒªã‚¬","ODã‚¯ã‚¢ãƒ‰ãƒªã‚¬",
  "ã‚¹ã‚¯ãƒˆã‚¥ãƒ ","ODã‚¹ã‚¯ãƒˆã‚¥ãƒ ","ãƒˆãƒ‹ãƒˆãƒ«ã‚¹","ãƒ—ãƒ­ã‚±ãƒƒãƒ©","ã‚¨ãƒ³ãƒ•ã‚©ãƒ«ãƒ‰",
  "SA1","SA2","SA3",
  "ãƒ‰ãƒ©ã‚¤ãƒ–ãƒ©ãƒƒã‚·ãƒ¥","cDR","ãƒ‰ãƒ©ã‚¤ãƒ–ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆ","æŠ•ã’","ã‚¸ãƒ£ãƒ³ãƒ—","å‰ã‚¹ãƒ†ãƒƒãƒ—","ãƒ‡ã‚£ãƒ¬ã‚¤",
  "Jå¼±P","Jä¸­P","Jå¼·P","J2å¼·P","Jå¼±K","Jä¸­K","Jå¼·K",
  "æºœã‚5å¼·P","æºœã‚4å¼·P","æºœã‚2å¼·P","æºœã‚3å¼·P","æºœã‚5å¼·K","æºœã‚6å¼·K","æºœã‚2å¼·K","ã“ã“ã¾ã§1ã‚³ãƒ³ãƒœ"];
moveListMap["JP"] = ["5å¼±P","2å¼±P","5å¼±K","2å¼±K",
  "5ä¸­P","4ä¸­P","2ä¸­P","5ä¸­K","6ä¸­K","2ä¸­K",
  "5å¼·P","2å¼·P","3å¼·P","5å¼·K","6å¼·K","2å¼·K",
  "4ä¸­Pï¼5ä¸­P","5å¼·Kï¼5å¼·P","5å¼·Kï¼5å¼·Pï¼5å¼·P","5å¼·Kï¼5å¼·Pï¼5å¼·K",
  "å¼±ãƒˆãƒªã‚°ãƒ©ãƒ•","ä¸­ãƒˆãƒªã‚°ãƒ©ãƒ•","å¼·ãƒˆãƒªã‚°ãƒ©ãƒ•","å¼±ä¸­ãƒˆãƒªã‚°ãƒ©ãƒ•","å¼±å¼·ãƒˆãƒªã‚°ãƒ©ãƒ•","ä¸­å¼·ãƒˆãƒªã‚°ãƒ©ãƒ•",
  "å¼±ã‚¹ãƒˆãƒªãƒœãƒ¼ã‚°","ä¸­ã‚¹ãƒˆãƒªãƒœãƒ¼ã‚°","å¼·ã‚¹ãƒˆãƒªãƒœãƒ¼ã‚°","ODã‚¹ãƒˆãƒªãƒœãƒ¼ã‚°",
  "å¼±ãƒ´ã‚£ãƒ¼ãƒãƒˆ","ä¸­ãƒ´ã‚£ãƒ¼ãƒãƒˆ","å¼·ãƒ´ã‚£ãƒ¼ãƒãƒˆ","å¼±ä¸­ãƒ´ã‚£ãƒ¼ãƒãƒˆ","å¼±å¼·ãƒ´ã‚£ãƒ¼ãƒãƒˆ","ä¸­å¼·ãƒ´ã‚£ãƒ¼ãƒãƒˆ",
  "å¼±ãƒ´ã‚£ãƒ¼ãƒãƒˆã‚¢ã‚¯ãƒ","ä¸­ãƒ´ã‚£ãƒ¼ãƒãƒˆã‚¢ã‚¯ãƒ","ãƒ´ã‚£ãƒ¼ãƒãƒˆãƒã‚§ãƒ¼ãƒ‹","èµ·çˆ†HIT",
  "ã‚¢ãƒ ãƒã‚¸ã‚¢","ODã‚¢ãƒ ãƒã‚¸ã‚¢",
  "å¼±ãƒˆãƒ«ãƒãƒ©ãƒ³","ä¸­ãƒˆãƒ«ãƒãƒ©ãƒ³","å¼·ãƒˆãƒ«ãƒãƒ©ãƒ³","ODãƒˆãƒ«ãƒãƒ©ãƒ³",
  "ã‚¢ãƒ–ãƒ‹ãƒãƒ¼ãƒ","ODã‚¢ãƒ–ãƒ‹ãƒãƒ¼ãƒ",
  "SA1","SA2","SA3",
  "ãƒ‰ãƒ©ã‚¤ãƒ–ãƒ©ãƒƒã‚·ãƒ¥","cDR","ãƒ‰ãƒ©ã‚¤ãƒ–ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆ","æŠ•ã’","å¾®æ­©ã","å‰ã‚¹ãƒ†ãƒƒãƒ—","å‰ã‚¸ãƒ£ãƒ³ãƒ—","ãƒã‚¯ã‚¹ãƒ†","ãƒ‡ã‚£ãƒ¬ã‚¤",
  "Jå¼±P","Jä¸­P","Jå¼·P","Jå¼±K","Jä¸­K","Jå¼·K","ã“ã“ã¾ã§1ã‚³ãƒ³ãƒœ"];
moveListMap["ã‚¸ãƒ¥ãƒª"] = ["5å¼±P","2å¼±P","5å¼±K","2å¼±K",
  "5ä¸­P","6ä¸­P","2ä¸­P","5ä¸­K","5ä¸­K(1æ®µç›®)","6ä¸­K","2ä¸­K",
  "5å¼·P","6å¼·P","2å¼·P","5å¼·K","4å¼·K","4å¼·K(2æ®µç›®)","2å¼·K",
  "5ä¸­Pï¼4å¼·P","5ä¸­Pï¼4å¼·Pï¼5å¼·P",
  "å¼±é¢¨ç ´åˆƒ","ä¸­é¢¨ç ´åˆƒ","å¼·é¢¨ç ´åˆƒ","ODé¢¨ç ´åˆƒ",
  "æ­³ç ´è¡","å¼·åŒ–æ­³ç ´è¡","ODæ­³ç ´è¡",
  "æš—å‰£æ®º","å¼·åŒ–æš—å‰£æ®º","ODæš—å‰£æ®º",
  "äº”é»„æ®º","å¼·åŒ–äº”é»„æ®º","ODäº”é»„æ®º",
  "å¼±å¤©ç©¿è¼ª","ä¸­å¤©ç©¿è¼ª","å¼·å¤©ç©¿è¼ª","ODå¤©ç©¿è¼ª",
  "ç–¾ç©ºé–ƒ","ODç–¾ç©ºé–ƒ","æ­»é€£é–ƒ",
  "SA1","SA2","SA3",
  "ãƒ‰ãƒ©ã‚¤ãƒ–ãƒ©ãƒƒã‚·ãƒ¥","cDR","ãƒ‰ãƒ©ã‚¤ãƒ–ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆ","æŠ•ã’","å‰ã‚¸ãƒ£ãƒ³ãƒ—","å‰ã‚¹ãƒ†ãƒƒãƒ—","ãƒã‚¯ã‚¹ãƒ†","ãƒ‡ã‚£ãƒ¬ã‚¤",
  "Jå¼±P","Jä¸­P","Jå¼·P","å‚ç›´Jå¼·P","Jå¼±K","Jä¸­K","Jå¼·K","ã“ã“ã¾ã§1ã‚³ãƒ³ãƒœ",
  "å¼±æ´¾ç”Ÿ","å¼·åŒ–å¼±æ´¾ç”Ÿ","ODå¼±æ´¾ç”Ÿ",
  "ä¸­æ´¾ç”Ÿ","å¼·åŒ–ä¸­æ´¾ç”Ÿ","ODä¸­æ´¾ç”Ÿ",
  "å¼·æ´¾ç”Ÿ","å¼·åŒ–å¼·æ´¾ç”Ÿ","ODå¼·æ´¾ç”Ÿ"];
moveListMap["ã‚­ãƒ£ãƒŸã‚£"] = ["5å¼±P","2å¼±P","5å¼±K","2å¼±K",
  "5ä¸­P","4ä¸­P","2ä¸­P","5ä¸­K","2ä¸­K",
  "5å¼·P","2å¼·P","5å¼·K","4å¼·K","6å¼·K","2å¼·K",
  "4ä¸­Pï¼5å¼·K","5å¼·Pï¼5å¼·K(1æ®µç›®)","5å¼·Pï¼5å¼·K",
  "å¼±ã‚¹ãƒ‘ã‚¤ãƒ©ãƒ«ã‚¢ãƒ­ãƒ¼","ä¸­ã‚¹ãƒ‘ã‚¤ãƒ©ãƒ«ã‚¢ãƒ­ãƒ¼","å¼·ã‚¹ãƒ‘ã‚¤ãƒ©ãƒ«ã‚¢ãƒ­ãƒ¼","æºœã‚ã‚¢ãƒ­ãƒ¼","ODã‚¹ãƒ‘ã‚¤ãƒ©ãƒ«ã‚¢ãƒ­ãƒ¼",
  "å¼±ã‚­ãƒ£ãƒãƒ³ã‚¹ãƒ‘ã‚¤ã‚¯","ä¸­ã‚­ãƒ£ãƒãƒ³ã‚¹ãƒ‘ã‚¤ã‚¯","å¼·ã‚­ãƒ£ãƒãƒ³ã‚¹ãƒ‘ã‚¤ã‚¯","æºœã‚ã‚¹ãƒ‘ã‚¤ã‚¯","ODã‚­ãƒ£ãƒãƒ³ã‚¹ãƒ‘ã‚¤ã‚¯",
  "å¼±ã‚¢ã‚¯ã‚»ãƒ«ã‚¹ãƒ”ãƒ³ãƒŠãƒƒã‚¯ãƒ«","ä¸­ã‚¢ã‚¯ã‚»ãƒ«ã‚¹ãƒ”ãƒ³ãƒŠãƒƒã‚¯ãƒ«","å¼·ã‚¢ã‚¯ã‚»ãƒ«ã‚¹ãƒ”ãƒ³ãƒŠãƒƒã‚¯ãƒ«","ODã‚¢ã‚¯ã‚»ãƒ«ã‚¹ãƒ”ãƒ³ãƒŠãƒƒã‚¯ãƒ«",
  "å¼±ã‚­ãƒ£ãƒãƒ³ã‚¹ãƒˆãƒ©ã‚¤ã‚¯","ä¸­ã‚­ãƒ£ãƒãƒ³ã‚¹ãƒˆãƒ©ã‚¤ã‚¯","å¼·ã‚­ãƒ£ãƒãƒ³ã‚¹ãƒˆãƒ©ã‚¤ã‚¯","ODã‚­ãƒ£ãƒãƒ³ã‚¹ãƒˆãƒ©ã‚¤ã‚¯",
  "å¼±ãƒ•ãƒ¼ãƒªã‚¬ãƒ³","ä¸­ãƒ•ãƒ¼ãƒªã‚¬ãƒ³","å¼·ãƒ•ãƒ¼ãƒªã‚¬ãƒ³","æºœã‚ãƒ•ãƒ¼ãƒªã‚¬ãƒ³","ODãƒ•ãƒ¼ãƒªã‚¬ãƒ³",
  "æ´¾ç”Ÿã‚­ãƒ£ãƒãƒ³ã‚¹ãƒˆãƒ©ã‚¤ã‚¯","æ´¾ç”Ÿãƒªãƒãƒ¼ã‚¹ã‚¨ãƒƒã‚¸","æ´¾ç”Ÿãƒ¬ã‚¤ã‚¶ãƒ¼ã‚¨ãƒƒã‚¸ã‚¹ãƒ©ã‚¤ã‚µãƒ¼","æ´¾ç”ŸæŠ•ã’",
  "SA1","SA2","SA3",
  "ãƒ‰ãƒ©ã‚¤ãƒ–ãƒ©ãƒƒã‚·ãƒ¥","cDR","ãƒ‰ãƒ©ã‚¤ãƒ–ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆ","æŠ•ã’","ã‚¸ãƒ£ãƒ³ãƒ—","å‰ã‚¹ãƒ†ãƒƒãƒ—","ãƒ‡ã‚£ãƒ¬ã‚¤",
  "Jå¼±P","Jä¸­P","Jå¼·P","Jå¼±K","Jä¸­K","Jå¼·K","ã“ã“ã¾ã§1ã‚³ãƒ³ãƒœ"];
moveListMap["æœ¬ç”°"] = ["5å¼±P", "2å¼±P", "æ³¢å‹•æ‹³", "æ˜‡é¾æ‹³", "ç«œå·»æ—‹é¢¨è„š"];
moveListMap["ãƒ–ãƒ©ãƒ³ã‚«"] = ["5å¼±P","2å¼±P","5å¼±K","2å¼±K",
      "5ä¸­P","6ä¸­P","2ä¸­P","5ä¸­K","4ä¸­K","6ä¸­K","2ä¸­K",
      "5å¼·P","6å¼·P","2å¼·P","3å¼·P","5å¼·K","2å¼·K",
      "ã‚¨ãƒ¬ã‚¯ãƒˆãƒªãƒƒã‚¯ã‚µãƒ³ãƒ€ãƒ¼","ODã‚¨ãƒ¬ã‚¯ãƒˆãƒªãƒƒã‚¯ã‚µãƒ³ãƒ€ãƒ¼",
      "å¼±ãƒãƒƒã‚¯ã‚¹ãƒ†ãƒƒãƒ—ãƒ­ãƒ¼ãƒªãƒ³ã‚°","ä¸­ãƒãƒƒã‚¯ã‚¹ãƒ†ãƒƒãƒ—ãƒ­ãƒ¼ãƒªãƒ³ã‚°","å¼·ãƒãƒƒã‚¯ã‚¹ãƒ†ãƒƒãƒ—ãƒ­ãƒ¼ãƒªãƒ³ã‚°","ODãƒãƒƒã‚¯ã‚¹ãƒ†ãƒƒãƒ—ãƒ­ãƒ¼ãƒªãƒ³ã‚°",
      "å¼±ãƒ­ãƒ¼ãƒªãƒ³ã‚°ã‚¢ã‚¿ãƒƒã‚¯","ä¸­ãƒ­ãƒ¼ãƒªãƒ³ã‚°ã‚¢ã‚¿ãƒƒã‚¯","å¼·ãƒ­ãƒ¼ãƒªãƒ³ã‚°ã‚¢ã‚¿ãƒƒã‚¯","ODãƒ­ãƒ¼ãƒªãƒ³ã‚°ã‚¢ã‚¿ãƒƒã‚¯",
      "å¼±ã‚¨ãƒªã‚¢ãƒ«ãƒ­ãƒ¼ãƒªãƒ³ã‚°","ä¸­ã‚¨ãƒªã‚¢ãƒ«ãƒ­ãƒ¼ãƒªãƒ³ã‚°","å¼·ã‚¨ãƒªã‚¢ãƒ«ãƒ­ãƒ¼ãƒªãƒ³ã‚°","ODã‚¨ãƒªã‚¢ãƒ«ãƒ­ãƒ¼ãƒªãƒ³ã‚°",
      "å¼±ãƒãƒ¼ãƒã‚«ãƒ«ãƒ­ãƒ¼ãƒªãƒ³ã‚°","ä¸­ãƒãƒ¼ãƒã‚«ãƒ«ãƒ­ãƒ¼ãƒªãƒ³ã‚°","å¼·ãƒãƒ¼ãƒã‚«ãƒ«ãƒ­ãƒ¼ãƒªãƒ³ã‚°","ODãƒãƒ¼ãƒã‚«ãƒ«ãƒ­ãƒ¼ãƒªãƒ³ã‚°",
      "ãƒ•ã‚£ã‚¢ãƒ¼ãƒ€ã‚¦ãƒ³","ãƒ¯ã‚¤ãƒ«ãƒ‰ãƒªãƒ•ãƒˆ","ãƒ¬ã‚¤ãƒ‰ã‚¸ãƒ£ãƒ³ãƒ—","ãƒ¯ã‚¤ãƒ«ãƒ‰ãƒãƒ³ãƒˆ","ODãƒ¯ã‚¤ãƒ«ãƒ‰ãƒãƒ³ãƒˆ",
      "1P","2P","3P","4P","6P","7P","8P","9P",
      "ãƒ–ãƒ©ãƒ³ã‚«ã¡ã‚ƒã‚“çˆ†å¼¾","ãƒ–ãƒ©ãƒ³ã‚«ã¡ã‚ƒã‚“HIT","ã‚µãƒ—ãƒ©ã‚¤ã‚ºãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‰","ã‚µãƒ—ãƒ©ã‚¤ã‚ºãƒãƒƒã‚¯",
      "SA1","SA2","SA3",
      "ãƒ‰ãƒ©ã‚¤ãƒ–ãƒ©ãƒƒã‚·ãƒ¥","cDR","ãƒ‰ãƒ©ã‚¤ãƒ–ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆ","æŠ•ã’","å‰ã‚¹ãƒ†ãƒƒãƒ—","ãƒãƒƒã‚¯ã‚¸ãƒ£ãƒ³ãƒ—","ãƒ‡ã‚£ãƒ¬ã‚¤",
      "Jå¼±P","Jä¸­P","Jå¼·P","Jå¼±K","Jä¸­K","Jå¼·K","å‚ç›´Jå¼·P","ã“ã“ã¾ã§1ã‚³ãƒ³ãƒœ"];
moveListMap["ã‚¬ã‚¤ãƒ«"] = ["5å¼±P", "2å¼±P", "æ³¢å‹•æ‹³", "æ˜‡é¾æ‹³", "ç«œå·»æ—‹é¢¨è„š"];
moveListMap["ã‚±ãƒ³"] = ["5å¼±P","2å¼±P","5å¼±K","2å¼±K",
      "5ä¸­P","2ä¸­P","5ä¸­K","2ä¸­K",
      "5å¼·P","2å¼·P","5å¼·K","2å¼·K",
      "5ä¸­Pï¼5å¼·P","5ä¸­Kï¼5ä¸­K","5ä¸­Kï¼5ä¸­Kï¼5å¼·K",
      "æ€¥åœæ­¢","ç´«é›»ã‚«ã‚«ãƒˆè½ã¨ã—","è¸ã¿è¾¼ã¿å‰è¹´ã‚Š",
      "å¼±æ³¢å‹•æ‹³","ä¸­æ³¢å‹•æ‹³","å¼·æ³¢å‹•æ‹³","ODæ³¢å‹•æ‹³",
      "å¼±æ˜‡é¾æ‹³","ä¸­æ˜‡é¾æ‹³","å¼·æ˜‡é¾æ‹³","ODæ˜‡é¾æ‹³","ã€å¥®è¿…ã€‘æ˜‡é¾æ‹³",
      "å¼±ç«œå·»æ—‹é¢¨è„š","ä¸­ç«œå·»æ—‹é¢¨è„š","å¼·ç«œå·»æ—‹é¢¨è„š","ODç«œå·»æ—‹é¢¨è„š","ã€å¥®è¿…ã€‘ç«œå·»æ—‹é¢¨è„š",
      "å¼±é¾å°¾è„š","ä¸­é¾å°¾è„š","å¼·é¾å°¾è„š","ODé¾å°¾è„š","ã€å¥®è¿…ã€‘é¾å°¾è„š",
      "å¼±è¿…é›·è„š","ä¸­è¿…é›·è„š","å¼·è¿…é›·è„š","ODè¿…é›·è„š",
      "å¼±æ´¾ç”Ÿ","ä¸­æ´¾ç”Ÿ","å¼·æ´¾ç”Ÿ","ODå¼±æ´¾ç”Ÿ","ODä¸­æ´¾ç”Ÿ","ODå¼·æ´¾ç”Ÿ","ODå¼±æ´¾ç”Ÿ(2æ®µç›®)","ODä¸­æ´¾ç”Ÿ(2æ®µç›®)","ODå¼·æ´¾ç”Ÿ(2æ®µç›®)",
      "SA1","SA2","SA3",
      "ãƒ‰ãƒ©ã‚¤ãƒ–ãƒ©ãƒƒã‚·ãƒ¥","cDR","ãƒ‰ãƒ©ã‚¤ãƒ–ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆ","æŠ•ã’","ã‚¸ãƒ£ãƒ³ãƒ—","å‰ã‚¹ãƒ†ãƒƒãƒ—","ãƒ‡ã‚£ãƒ¬ã‚¤",
      "Jå¼±P","Jä¸­P","Jå¼·P","Jå¼±K","Jä¸­K","Jå¼·K","å‚ç›´Jå¼·K","ç©ºä¸­ç«œå·»æ—‹é¢¨è„š","ODç©ºä¸­ç«œå·»æ—‹é¢¨è„š","ã“ã“ã¾ã§1ã‚³ãƒ³ãƒœ"];
moveListMap["æ˜¥éº—"] = ["5å¼±P","2å¼±P","5å¼±K","2å¼±K",
      "5ä¸­P","6ä¸­P","2ä¸­P","5ä¸­K","2ä¸­K",
      "5å¼·P","4å¼·P","3å¼·P","2å¼·P","5å¼·K","6å¼·K","2å¼·K","3å¼·K",
      "å¼±æ°—åŠŸæ‹³","ä¸­æ°—åŠŸæ‹³","å¼·æ°—åŠŸæ‹³","ODæ°—åŠŸæ‹³",
      "å¼±ç™¾è£‚è„š","ä¸­ç™¾è£‚è„š","å¼·ç™¾è£‚è„š","ODç™¾è£‚è„š",
      "å¼±ã‚¹ãƒ”ãƒ‹ãƒ³ã‚°ãƒãƒ¼ãƒ‰ã‚­ãƒƒã‚¯","ä¸­ã‚¹ãƒ”ãƒ‹ãƒ³ã‚°ãƒãƒ¼ãƒ‰ã‚­ãƒƒã‚¯","å¼·ã‚¹ãƒ”ãƒ‹ãƒ³ã‚°ãƒãƒ¼ãƒ‰ã‚­ãƒƒã‚¯","ODã‚¹ãƒ”ãƒ‹ãƒ³ã‚°ãƒãƒ¼ãƒ‰ã‚­ãƒƒã‚¯",
      "å¼±è¦‡å±±è¹´","ä¸­è¦‡å±±è¹´","å¼·è¦‡å±±è¹´","ODè¦‡å±±è¹´",
      "å¼±å¤©æ˜‡è„š","ä¸­å¤©æ˜‡è„š","å¼·å¤©æ˜‡è„š","ODå¤©æ˜‡è„š",
      "æ§‹ãˆå¼±P","æ§‹ãˆä¸­P","æ§‹ãˆå¼·P","æ§‹ãˆå¼±K","æ§‹ãˆä¸­K","æ§‹ãˆå¼·K",
      "SA1","SA2","SA3",
      "ãƒ‰ãƒ©ã‚¤ãƒ–ãƒ©ãƒƒã‚·ãƒ¥","cDR","ãƒ‰ãƒ©ã‚¤ãƒ–ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆ","æŠ•ã’","ã‚¸ãƒ£ãƒ³ãƒ—","å‰ã‚¹ãƒ†ãƒƒãƒ—","ãƒ‡ã‚£ãƒ¬ã‚¤",
      "Jå¼±P","Jä¸­P","Jå¼·P","Jå¼·P(2æ®µç›®)","Jå¼±K","Jä¸­K","J2ä¸­K","Jå¼·K","å‚ç›´Jå¼·K","ã“ã“ã¾ã§1ã‚³ãƒ³ãƒœ"];
moveListMap["ã‚¶ãƒ³ã‚®ã‚¨ãƒ•"] = ["5å¼±P", "2å¼±P", "æ³¢å‹•æ‹³", "æ˜‡é¾æ‹³", "ç«œå·»æ—‹é¢¨è„š"];
moveListMap["ãƒ€ãƒ«ã‚·ãƒ "] = ["5å¼±P", "2å¼±P", "æ³¢å‹•æ‹³", "æ˜‡é¾æ‹³", "ç«œå·»æ—‹é¢¨è„š"];
moveListMap["ãƒ©ã‚·ãƒ¼ãƒ‰"] = ["5å¼±P","2å¼±P","5å¼±K","2å¼±K",
  "5ä¸­P","6ä¸­P","2ä¸­P","5ä¸­K","2ä¸­K",
  "5å¼·P","6å¼·P","2å¼·P","5å¼·K","6å¼·K","2å¼·K",
  "5ä¸­Pï¼5å¼·P",
  "å¼±ã‚¹ãƒ”ãƒ‹ãƒ³ã‚°ãƒ»ãƒŸã‚­ã‚µãƒ¼","ä¸­ã‚¹ãƒ”ãƒ‹ãƒ³ã‚°ãƒ»ãƒŸã‚­ã‚µãƒ¼","å¼·ã‚¹ãƒ”ãƒ‹ãƒ³ã‚°ãƒ»ãƒŸã‚­ã‚µãƒ¼","ODã‚¹ãƒ”ãƒ‹ãƒ³ã‚°ãƒ»ãƒŸã‚­ã‚µãƒ¼",
  "å¼±ã‚¤ãƒ¼ã‚°ãƒ«ãƒ»ã‚¹ãƒ‘ã‚¤ã‚¯","ä¸­ã‚¤ãƒ¼ã‚°ãƒ«ãƒ»ã‚¹ãƒ‘ã‚¤ã‚¯","å¼·ã‚¤ãƒ¼ã‚°ãƒ«ãƒ»ã‚¹ãƒ‘ã‚¤ã‚¯","ODã‚¤ãƒ¼ã‚°ãƒ«ãƒ»ã‚¹ãƒ‘ã‚¤ã‚¯",
  "å¼±ãƒ¯ãƒ¼ãƒ«ã‚¦ã‚¤ãƒ³ãƒ‰ãƒ»ã‚·ãƒ§ãƒƒãƒˆ","ä¸­ãƒ¯ãƒ¼ãƒ«ã‚¦ã‚¤ãƒ³ãƒ‰ãƒ»ã‚·ãƒ§ãƒƒãƒˆ","å¼·ãƒ¯ãƒ¼ãƒ«ã‚¦ã‚¤ãƒ³ãƒ‰ãƒ»ã‚·ãƒ§ãƒƒãƒˆ","ODãƒ¯ãƒ¼ãƒ«ã‚¦ã‚¤ãƒ³ãƒ‰ãƒ»ã‚·ãƒ§ãƒƒãƒˆ",
  "å¼±ã‚¢ãƒ©ãƒ“ã‚¢ãƒ³ãƒ»ã‚µã‚¤ã‚¯ãƒ­ãƒ³","ä¸­ã‚¢ãƒ©ãƒ“ã‚¢ãƒ³ãƒ»ã‚µã‚¤ã‚¯ãƒ­ãƒ³","å¼·ã‚¢ãƒ©ãƒ“ã‚¢ãƒ³ãƒ»ã‚µã‚¤ã‚¯ãƒ­ãƒ³","ODã‚¢ãƒ©ãƒ“ã‚¢ãƒ³ãƒ»ã‚µã‚¤ã‚¯ãƒ­ãƒ³",
  "ã‚¦ã‚¤ãƒ³ã‚°ãƒ»ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯","ã‚¢ã‚µãƒ«ãƒˆãƒ»ãƒ­ãƒ¼ãƒ«","ã‚¢ã‚µãƒ«ãƒˆãƒ»ãƒã‚¤ãƒ«",
  "å¼±ã‚¢ãƒ©ãƒ“ã‚¢ãƒ³ãƒ»ã‚¹ã‚«ã‚¤ãƒã‚¤","ä¸­ã‚¢ãƒ©ãƒ“ã‚¢ãƒ³ãƒ»ã‚¹ã‚«ã‚¤ãƒã‚¤","å¼·ã‚¢ãƒ©ãƒ“ã‚¢ãƒ³ãƒ»ã‚¹ã‚«ã‚¤ãƒã‚¤","ODã‚¢ãƒ©ãƒ“ã‚¢ãƒ³ãƒ»ã‚¹ã‚«ã‚¤ãƒã‚¤",
  "ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—","ãƒ†ãƒ³ãƒšã‚¹ãƒˆãƒ»ãƒ ãƒ¼ãƒ³","ã‚µã‚¤ãƒ‰ãƒ»ãƒ•ãƒªãƒƒãƒ—","ãƒ•ãƒ­ãƒ³ãƒˆãƒ»ãƒ•ãƒªãƒƒãƒ—",
  "SA1","SA2","SA3",
  "ãƒ‰ãƒ©ã‚¤ãƒ–ãƒ©ãƒƒã‚·ãƒ¥","cDR","ãƒ‰ãƒ©ã‚¤ãƒ–ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆ","æŠ•ã’","å‰ã‚¸ãƒ£ãƒ³ãƒ—","å‰ã‚¹ãƒ†ãƒƒãƒ—","ãƒã‚¯ã‚¹ãƒ†","RUN","ãƒ‡ã‚£ãƒ¬ã‚¤",
  "Jå¼±P","Jä¸­P","Jå¼·P","J2å¼·P","Jå¼±K","Jä¸­K","Jå¼·K","J7å¼·K","ã“ã“ã¾ã§1ã‚³ãƒ³ãƒœ",
  "æºœã‚å¼±ãƒ¯ãƒ¼ãƒ«","æºœã‚ä¸­ãƒ¯ãƒ¼ãƒ«","æºœã‚å¼·ãƒ¯ãƒ¼ãƒ«","æºœã‚ODãƒ¯ãƒ¼ãƒ«",
  "å¼·åŒ–å¼±ãƒŸã‚­ã‚µãƒ¼","å¼·åŒ–ä¸­ãƒŸã‚­ã‚µãƒ¼","å¼·åŒ–å¼·ãƒŸã‚­ã‚µãƒ¼","å¼·åŒ–ODãƒŸã‚­ã‚µãƒ¼",
  "å¼·åŒ–å¼±ã‚¹ãƒ‘ã‚¤ã‚¯","å¼·åŒ–ä¸­ã‚¹ãƒ‘ã‚¤ã‚¯","å¼·åŒ–å¼·ã‚¹ãƒ‘ã‚¤ã‚¯","å¼·åŒ–ODã‚¹ãƒ‘ã‚¤ã‚¯"];
moveListMap["ã‚¨ãƒ‰"] = ["5å¼±P", "2å¼±P", "æ³¢å‹•æ‹³", "æ˜‡é¾æ‹³", "ç«œå·»æ—‹é¢¨è„š"];
moveListMap["è±ªé¬¼"] = ["5å¼±P","2å¼±P","5å¼±K","2å¼±K",
  "5ä¸­P","6ä¸­P","2ä¸­P","5ä¸­K","6ä¸­K","2ä¸­K",
  "5å¼·P","6å¼·P","2å¼·P","5å¼·K","4å¼·K","2å¼·K",
  "5ä¸­Pï¼5å¼·P","6å¼·Pï¼5å¼·P","6å¼·Pï¼5å¼·Pï¼5å¼·K","5ä¸­Kï¼5å¼·K",
  "å¼±è±ªæ³¢å‹•æ‹³","ä¸­è±ªæ³¢å‹•æ‹³","å¼·è±ªæ³¢å‹•æ‹³","ODè±ªæ³¢å‹•æ‹³",
  "å¼±è±ªæ˜‡é¾æ‹³","ä¸­è±ªæ˜‡é¾æ‹³","å¼·è±ªæ˜‡é¾æ‹³","ODè±ªæ˜‡é¾æ‹³",
  "å¼±ç«œå·»æ–¬ç©ºè„š","ä¸­ç«œå·»æ–¬ç©ºè„š","å¼·ç«œå·»æ–¬ç©ºè„š","ODç«œå·»æ–¬ç©ºè„š","ç©ºä¸­ç«œå·»æ–¬ç©ºè„š","ODç©ºä¸­ç«œå·»æ–¬ç©ºè„š",
  "å¼±é‡‘å‰›ç¼ç«","ä¸­é‡‘å‰›ç¼ç«","å¼·é‡‘å‰›ç¼ç«","ODé‡‘å‰›ç¼ç«","é‡‘å‰›ç¼ç«æ´¾ç”Ÿ",
  "å¼±ç™¾é¬¼è¥²","ä¸­ç™¾é¬¼è¥²","å¼·ç™¾é¬¼è¥²","ODç™¾é¬¼è¥²",
  "ç™¾é¬¼è±ªæ–¬","ç™¾é¬¼è±ªè¡","ç™¾é¬¼è±ªåˆƒ",
  "å‰é˜¿ä¿®ç¾…é–ƒç©º","å¾Œã‚é˜¿ä¿®ç¾…é–ƒç©º","æœ§",
  "SA1","ç©ºä¸­SA1","SA2","SA3","ç¬ç„æ®º",
  "ãƒ‰ãƒ©ã‚¤ãƒ–ãƒ©ãƒƒã‚·ãƒ¥","cDR","ãƒ‰ãƒ©ã‚¤ãƒ–ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆ","æŠ•ã’","ã‚¸ãƒ£ãƒ³ãƒ—","å‰ã‚¹ãƒ†ãƒƒãƒ—","å¾®æ­©ã","ãƒ‡ã‚£ãƒ¬ã‚¤",
  "Jå¼±P","Jä¸­P","Jå¼·P","Jå¼±K","Jä¸­K","J2ä¸­K","Jå¼·K","ã“ã“ã¾ã§1ã‚³ãƒ³ãƒœ",
  "å¼±æ–¬ç©ºæ³¢å‹•æ‹³","ä¸­æ–¬ç©ºæ³¢å‹•æ‹³","å¼·æ–¬ç©ºæ³¢å‹•æ‹³","ODæ–¬ç©ºæ³¢å‹•æ‹³",
  "å¼±è±ªæ³¢å‹•æ‹³(Lv2)","ä¸­è±ªæ³¢å‹•æ‹³(Lv2)","å¼·è±ªæ³¢å‹•æ‹³(Lv2)","ODè±ªæ³¢å‹•æ‹³(Lv2)"];
moveListMap["ãƒ™ã‚¬"] = ["5å¼±P","2å¼±P","5å¼±K","2å¼±K",
      "5ä¸­P","2ä¸­P","5ä¸­K","2ä¸­K",
      "5å¼·P","6å¼·P","2å¼·P","5å¼·K","4å¼·K","2å¼·K","3å¼·K",
      "5ä¸­Pï¼6å¼·P","5ä¸­Pï¼2å¼·K",
      "å¼±ã‚µã‚¤ã‚³ã‚¯ãƒ©ãƒƒã‚·ãƒ£ãƒ¼ã‚¢ã‚¿ãƒƒã‚¯","ä¸­ã‚µã‚¤ã‚³ã‚¯ãƒ©ãƒƒã‚·ãƒ£ãƒ¼ã‚¢ã‚¿ãƒƒã‚¯","å¼·ã‚µã‚¤ã‚³ã‚¯ãƒ©ãƒƒã‚·ãƒ£ãƒ¼ã‚¢ã‚¿ãƒƒã‚¯","ODã‚µã‚¤ã‚³ã‚¯ãƒ©ãƒƒã‚·ãƒ£ãƒ¼ã‚¢ã‚¿ãƒƒã‚¯",
      "å¼±ãƒ€ãƒ–ãƒ«ãƒ‹ãƒ¼ãƒ—ãƒ¬ã‚¹","ä¸­ãƒ€ãƒ–ãƒ«ãƒ‹ãƒ¼ãƒ—ãƒ¬ã‚¹","å¼·ãƒ€ãƒ–ãƒ«ãƒ‹ãƒ¼ãƒ—ãƒ¬ã‚¹","ODãƒ€ãƒ–ãƒ«ãƒ‹ãƒ¼ãƒ—ãƒ¬ã‚¹",
      "å¼±ãƒãƒƒã‚¯ãƒ•ã‚£ã‚¹ãƒˆã‚³ãƒ³ãƒœ","ä¸­ãƒãƒƒã‚¯ãƒ•ã‚£ã‚¹ãƒˆã‚³ãƒ³ãƒœ","å¼·ãƒãƒƒã‚¯ãƒ•ã‚£ã‚¹ãƒˆã‚³ãƒ³ãƒœ","ODãƒãƒƒã‚¯ãƒ•ã‚£ã‚¹ãƒˆã‚³ãƒ³ãƒœ",
      "å¼±ã‚·ãƒ£ãƒ‰ã‚¦ãƒ©ã‚¤ã‚º","ä¸­ã‚·ãƒ£ãƒ‰ã‚¦ãƒ©ã‚¤ã‚º","å¼·ã‚·ãƒ£ãƒ‰ã‚¦ãƒ©ã‚¤ã‚º","ODã‚·ãƒ£ãƒ‰ã‚¦ãƒ©ã‚¤ã‚º",
      "ãƒ˜ãƒƒãƒ‰ãƒ—ãƒ¬ã‚¹","ODãƒ˜ãƒƒãƒ‰ãƒ—ãƒ¬ã‚¹","ã‚µãƒãƒ¼ã‚½ãƒ«ãƒˆã‚¹ã‚«ãƒ«ãƒ€ã‚¤ãƒãƒ¼","ãƒ‡ãƒ“ãƒ«ãƒªãƒãƒ¼ã‚¹","ODãƒ‡ãƒ“ãƒ«ãƒªãƒãƒ¼ã‚¹",
      "èµ·çˆ†",
      "SA1","SA2","SA3",
      "ãƒ‰ãƒ©ã‚¤ãƒ–ãƒ©ãƒƒã‚·ãƒ¥","cDR","ãƒ‰ãƒ©ã‚¤ãƒ–ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆ","æŠ•ã’","å‰ã‚¹ãƒ†ãƒƒãƒ—","ãƒ‡ã‚£ãƒ¬ã‚¤",
      "Jå¼±P","Jä¸­P","Jå¼·P","Jå¼±K","Jä¸­K","Jå¼·K","Jä¸­Pï¼Jä¸­P","ã“ã“ã¾ã§1ã‚³ãƒ³ãƒœ"];
moveListMap["ãƒ†ãƒªãƒ¼"] = ["5å¼±P","2å¼±P","5å¼±K","2å¼±K",
  "5ä¸­P","2ä¸­P","5ä¸­K","2ä¸­K",
  "5å¼·P","5å¼·P(1HIT)","6å¼·P","2å¼·P","5å¼·K","2å¼·K",
  "2ä¸­Kï¼2å¼·K","5ä¸­Pï¼5å¼·P","5ä¸­Pï¼5å¼·K","5ä¸­Pï¼5å¼·Kï¼5å¼·K","5ä¸­Pï¼5ä¸­K","5ä¸­Pï¼5ä¸­Kï¼5ä¸­P","5ä¸­Pï¼5ä¸­Kï¼5ä¸­K",
  "å¼±ãƒ‘ãƒ¯ãƒ¼ã‚¦ã‚§ã‚¤ãƒ–","ä¸­ãƒ‘ãƒ¯ãƒ¼ã‚¦ã‚§ã‚¤ãƒ–","ãƒ©ã‚¦ãƒ³ãƒ‰ã‚¦ã‚§ã‚¤ãƒ–","ODãƒ‘ãƒ¯ãƒ¼ã‚¦ã‚§ã‚¤ãƒ–",
  "å¼±ãƒ©ã‚¤ã‚¸ãƒ³ã‚°ã‚¿ãƒƒã‚¯ãƒ«","ä¸­ãƒ©ã‚¤ã‚¸ãƒ³ã‚°ã‚¿ãƒƒã‚¯ãƒ«","å¼·ãƒ©ã‚¤ã‚¸ãƒ³ã‚°ã‚¿ãƒƒã‚¯ãƒ«","ODãƒ©ã‚¤ã‚¸ãƒ³ã‚°ã‚¿ãƒƒã‚¯ãƒ«",
  "ã‚¯ã‚¤ãƒƒã‚¯ãƒãƒ¼ãƒ³","ODã‚¯ã‚¤ãƒƒã‚¯ãƒãƒ¼ãƒ³","ä¸­ãƒãƒ¼ãƒ³ãƒŠãƒƒã‚¯ãƒ«","å¼·ãƒãƒ¼ãƒ³ãƒŠãƒƒã‚¯ãƒ«","ODãƒãƒ¼ãƒ³ãƒŠãƒƒã‚¯ãƒ«",
  "å¼±ãƒ‘ãƒ¯ãƒ¼ãƒãƒ£ãƒ¼ã‚¸","ä¸­ãƒ‘ãƒ¯ãƒ¼ãƒãƒ£ãƒ¼ã‚¸","å¼·ãƒ‘ãƒ¯ãƒ¼ãƒãƒ£ãƒ¼ã‚¸","ODãƒ‘ãƒ¯ãƒ¼ãƒãƒ£ãƒ¼ã‚¸",
  "å¼±ã‚¯ãƒ©ãƒƒã‚¯ã‚·ãƒ¥ãƒ¼ãƒˆ","ä¸­ã‚¯ãƒ©ãƒƒã‚¯ã‚·ãƒ¥ãƒ¼ãƒˆ","å¼·ã‚¯ãƒ©ãƒƒã‚¯ã‚·ãƒ¥ãƒ¼ãƒˆ","ODã‚¯ãƒ©ãƒƒã‚¯ã‚·ãƒ¥ãƒ¼ãƒˆ",
  "SA1","SA2","SA2(è¿½åŠ å…¥åŠ›)","SA3",
  "ãƒ‰ãƒ©ã‚¤ãƒ–ãƒ©ãƒƒã‚·ãƒ¥","cDR","ãƒ‰ãƒ©ã‚¤ãƒ–ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆ","æŠ•ã’","ã‚¸ãƒ£ãƒ³ãƒ—","å‰ã‚¹ãƒ†ãƒƒãƒ—","ãƒ‡ã‚£ãƒ¬ã‚¤",
  "Jå¼±P","Jä¸­P","Jå¼·P","Jå¼±K","Jä¸­K","Jå¼·K","ã“ã“ã¾ã§1ã‚³ãƒ³ãƒœ"];
moveListMap["èˆ"] = ["5å¼±P","2å¼±P","5å¼±K","2å¼±K",
  "5ä¸­P","6ä¸­P","2ä¸­P","5ä¸­K","2ä¸­K",
  "5å¼·P","2å¼·P","5å¼·K","4å¼·K","2å¼·K",
  "5å¼±Kï¼5å¼±Kï¼5å¼±K","4å¼·Kï¼5å¼·K",
  "å¼±èŠ±è¶æ‰‡","ä¸­èŠ±è¶æ‰‡","å¼·èŠ±è¶æ‰‡","ODèŠ±è¶æ‰‡",
  "å¼±é¾ç‚èˆ","ä¸­é¾ç‚èˆ","å¼·é¾ç‚èˆ","ODé¾ç‚èˆ",
  "å¼±å¿…æ®ºå¿èœ‚","ä¸­å¿…æ®ºå¿èœ‚","å¼·å¿…æ®ºå¿èœ‚","ODå¿…æ®ºå¿èœ‚",
  "å¼±é£›ç¿”é¾ç‚é™£","ä¸­é£›ç¿”é¾ç‚é™£","å¼·é£›ç¿”é¾ç‚é™£","ODé£›ç¿”é¾ç‚é™£",
  "ãƒ ã‚µã‚µãƒ“ã®èˆ","ODãƒ ã‚µã‚µãƒ“ã®èˆ",
  "SA1","SA2","SA3",
  "ãƒ‰ãƒ©ã‚¤ãƒ–ãƒ©ãƒƒã‚·ãƒ¥","cDR","ãƒ‰ãƒ©ã‚¤ãƒ–ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆ","æŠ•ã’","ã‚¸ãƒ£ãƒ³ãƒ—","å‰ã‚¹ãƒ†ãƒƒãƒ—","ãƒ‡ã‚£ãƒ¬ã‚¤",
  "Jå¼±P","Jä¸­P","Jå¼·P","Jå¼±K","Jä¸­K","Jå¼·K","ã“ã“ã¾ã§1ã‚³ãƒ³ãƒœ",
  "æºœã‚å¼±èŠ±è¶æ‰‡","æºœã‚ä¸­èŠ±è¶æ‰‡","æºœã‚å¼·èŠ±è¶æ‰‡","æºœã‚ODèŠ±è¶æ‰‡","ä¹±ã‚ŒèŠ±è¶æ‰‡"];
moveListMap["ã‚¨ãƒ¬ãƒŠ"] = [ "5å¼±P","2å¼±P","5å¼±K","2å¼±K",
  "5ä¸­P","2ä¸­P","5ä¸­K","6ä¸­K","2ä¸­K",
  "5å¼·P","6å¼·P","2å¼·P","5å¼·K","4å¼·K","2å¼·K","3å¼·K",
  "5ä¸­Pï¼5ä¸­P","5ä¸­Kï¼5å¼·K","2ä¸­Kï¼5å¼·K","5å¼·Pï¼5å¼·P","6å¼·Pï¼5å¼·Pï¼5å¼·P",
  "å¼±ãƒ©ã‚¤ãƒãƒ›ãƒ¼ãƒ³","ä¸­ãƒ©ã‚¤ãƒãƒ›ãƒ¼ãƒ³","å¼·ãƒ©ã‚¤ãƒãƒ›ãƒ¼ãƒ³","ODãƒ©ã‚¤ãƒãƒ›ãƒ¼ãƒ³",
  "å¼±ã‚¹ã‚¯ãƒ©ãƒƒãƒãƒ›ã‚¤ãƒ¼ãƒ«","ä¸­ã‚¹ã‚¯ãƒ©ãƒƒãƒãƒ›ã‚¤ãƒ¼ãƒ«","å¼·ã‚¹ã‚¯ãƒ©ãƒƒãƒãƒ›ã‚¤ãƒ¼ãƒ«","ODã‚¹ã‚¯ãƒ©ãƒƒãƒãƒ›ã‚¤ãƒ¼ãƒ«",
  "å¼±ã‚¹ãƒ”ãƒ³ã‚µã‚¤ã‚º","ä¸­ã‚¹ãƒ”ãƒ³ã‚µã‚¤ã‚º","å¼·ã‚¹ãƒ”ãƒ³ã‚µã‚¤ã‚º","ODã‚¹ãƒ”ãƒ³ã‚µã‚¤ã‚º",
  "å¼±ãƒªãƒ³ã‚¯ã‚·ãƒ³ã‚°","ä¸­ãƒªãƒ³ã‚¯ã‚·ãƒ³ã‚°","å¼·ãƒªãƒ³ã‚¯ã‚·ãƒ³ã‚°","ODãƒªãƒ³ã‚¯ã‚·ãƒ³ã‚°",
  "å¼±ãƒªãƒ³ã‚¯ã‚¹ãƒ¯ãƒ¼ãƒ«","ä¸­ãƒªãƒ³ã‚¯ã‚¹ãƒ¯ãƒ¼ãƒ«","å¼·ãƒªãƒ³ã‚¯ã‚¹ãƒ¯ãƒ¼ãƒ«",
  "ãƒ¬ã‚ªãƒ‘ãƒ¼ãƒ‰ã‚¹ãƒŠãƒƒãƒ—","ãƒãƒ¼ãƒ™ã‚¹ãƒˆã‚µãƒ¼ã‚¯ãƒ«","ãƒãƒ¬ãƒƒãƒˆã‚¹ãƒãƒƒã‚·ãƒ¥",
  "å¼·åŒ–ãƒ¬ã‚ªãƒ‘ãƒ¼ãƒ‰ã‚¹ãƒŠãƒƒãƒ—","å¼·åŒ–ãƒãƒ¼ãƒ™ã‚¹ãƒˆã‚µãƒ¼ã‚¯ãƒ«","å¼·åŒ–ãƒãƒ¬ãƒƒãƒˆã‚¹ãƒãƒƒã‚·ãƒ¥",
  "å¼±ãƒ ãƒ¼ãƒ³ã‚°ãƒ©ã‚¤ãƒ‰","ä¸­ãƒ ãƒ¼ãƒ³ã‚°ãƒ©ã‚¤ãƒ‰","å¼·ãƒ ãƒ¼ãƒ³ã‚°ãƒ©ã‚¤ãƒ‰","ODãƒ ãƒ¼ãƒ³ã‚°ãƒ©ã‚¤ãƒ‰","ãƒ ãƒ¼ãƒ³ã‚°ãƒ©ã‚¤ãƒ‰æ´¾ç”Ÿ",
  "SA1","SA2","SA3",
  "ãƒ‰ãƒ©ã‚¤ãƒ–ãƒ©ãƒƒã‚·ãƒ¥","cDR","ãƒ‰ãƒ©ã‚¤ãƒ–ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆ","æŠ•ã’","ã‚¸ãƒ£ãƒ³ãƒ—","å‰ã‚¹ãƒ†ãƒƒãƒ—","ãƒ‡ã‚£ãƒ¬ã‚¤",
  "Jå¼±P","Jä¸­P","Jå¼·P","Jå¼±K","Jä¸­K","Jå¼·K","ã“ã“ã¾ã§1ã‚³ãƒ³ãƒœ"];
moveListMap["ãƒ´ã‚¡ã‚¤ãƒ‘ãƒ¼"] = ["5å¼±P", "2å¼±P", "æ³¢å‹•æ‹³", "æ˜‡é¾æ‹³", "ç«œå·»æ—‹é¢¨è„š"];
moveListMap["ã‚¢ãƒ¬ãƒƒã‚¯ã‚¹"] = ["5å¼±P", "2å¼±P", "æ³¢å‹•æ‹³", "æ˜‡é¾æ‹³", "ç«œå·»æ—‹é¢¨è„š"];
moveListMap["ã‚¤ãƒ³ã‚°ãƒªãƒƒãƒ‰"] = ["5å¼±P", "2å¼±P", "æ³¢å‹•æ‹³", "æ˜‡é¾æ‹³", "ç«œå·»æ—‹é¢¨è„š"];


characters.forEach(c=>{
  const o=document.createElement("option");
  o.value=c; o.textContent=c;
  charSelect.appendChild(o);
});

let unsubscribe = null;
function startRealtimeListener(char){
  if(unsubscribe) unsubscribe();
  const docRef = doc(db,"combos",char);
  unsubscribe = onSnapshot(docRef, (docSnap)=>{
    if(docSnap.exists()){
      const data = docSnap.data().rows || [];
      comboArea.innerHTML=""; rowCount=0;
      data.forEach(r=>addRow(r));
    } else { comboArea.innerHTML=""; rowCount=0; }
  });
}

function updateImageMap(){
  imageMap = {};
  (moveListMap[currentChar] || []).forEach(move=>{
    const folder = charFolderMap[currentChar];
    imageMap[move] = `images/${folder}/${move}.png`;
  });
}

charSelect.addEventListener("change",()=>{
  currentChar = charSelect.value;
  updateImageMap();
  startRealtimeListener(currentChar);
});

addRowBtn.addEventListener("click",()=>addRow());

saveFirestoreBtn.addEventListener("click", async()=>{
  const data = getCurrentData();
  await setDoc(doc(db,"combos",currentChar), {rows:data});
  alert("Firestoreã«ä¿å­˜ã—ã¾ã—ãŸ");
});

function getCurrentData(){
  return [...comboArea.querySelectorAll(".combo-row")].map(row=>{
    return {title: row.querySelector(".row-title").value,
            moves: [...row.querySelectorAll(".image-box img")].map(img=>img.alt)};
  });
}

function addRow(savedData=null){
  rowCount++;
  const rowDiv=document.createElement("div"); rowDiv.classList.add("combo-row"); rowDiv.draggable=true;

  const header=document.createElement("div"); header.classList.add("row-header");
  const titleInput=document.createElement("input"); titleInput.type="text"; titleInput.value=savedData?.title||`ã‚³ãƒ³ãƒœ${rowCount}`; titleInput.classList.add("row-title");
  const deleteBtn=document.createElement("button"); deleteBtn.textContent="Ã—æ®µå‰Šé™¤"; deleteBtn.classList.add("row-delete-btn"); deleteBtn.addEventListener("click",()=>rowDiv.remove());
  const duplicateBtn=document.createElement("button"); duplicateBtn.textContent="è¤‡è£½"; duplicateBtn.classList.add("row-duplicate-btn"); 
  duplicateBtn.addEventListener("click",()=>duplicateRow(rowDiv));
  header.append(titleInput,deleteBtn,duplicateBtn);

  const controls=document.createElement("div"); controls.classList.add("controls");
  const select=document.createElement("select");
  const defaultOption=document.createElement("option"); defaultOption.value=""; defaultOption.textContent="æŠ€ã‚’é¸æŠã—ã¦ãã ã•ã„"; select.appendChild(defaultOption);
  (moveListMap[currentChar] || []).forEach(move=>{ const o=document.createElement("option"); o.value=move; o.textContent=move; select.appendChild(o); });
  const addBtn=document.createElement("button"); addBtn.textContent="è¿½åŠ "; controls.append(select,addBtn);

  const container=document.createElement("div"); container.classList.add("image-container");
  addBtn.addEventListener("click",()=>{ const move=select.value; if(move && imageMap[move]) addImageBox(container,move); });
  if(savedData?.moves) savedData.moves.forEach(m=>addImageBox(container,m));

  rowDiv.append(header,controls,container);
  comboArea.appendChild(rowDiv);
  addRowDragAndDrop(rowDiv);
  return rowDiv;
}

function duplicateRow(row){
  const title=row.querySelector(".row-title").value+"_ã‚³ãƒ”ãƒ¼";
  const moves=[...row.querySelectorAll(".image-box img")].map(img=>img.alt);
  const newRow=addRow({title,moves});
  row.after(newRow);
}

function addImageBox(container,move){
  const box=document.createElement("div"); box.classList.add("image-box"); box.draggable=true;
  const img=document.createElement("img"); img.src=imageMap[move]; img.alt=move;
  const delBtn=document.createElement("button"); delBtn.textContent="Ã—"; delBtn.classList.add("delete-btn"); delBtn.addEventListener("click",()=>box.remove());
  box.append(img,delBtn); container.appendChild(box);
  addImageDragAndDrop(box,container);
}

function addImageDragAndDrop(element,container){
  let guide;
  element.addEventListener("dragstart",(e)=>{
    e.dataTransfer.setData("text/plain","");
    element.classList.add("dragging");
    guide=document.createElement("div"); guide.classList.add("drag-guide"); container.appendChild(guide);
  });
  element.addEventListener("dragend",(e)=>{
    element.classList.remove("dragging");
    if(guide){ 
      const after=getDragAfterElement(container,e.clientX);
      if(after) container.insertBefore(element,after);
      else container.appendChild(element);
      guide.remove();
    }
  });
  container.addEventListener("dragover",(e)=>{
    e.preventDefault();
    const after=getDragAfterElement(container,e.clientX);
    if(guide){
      guide.style.display="block";
      guide.style.left= after ? after.offsetLeft+"px" : (container.offsetWidth-4)+"px";
    }
  });
}
function getDragAfterElement(container,x){
  const elements=[...container.querySelectorAll(".image-box:not(.dragging)")];
  return elements.find(el=>x<el.getBoundingClientRect().left+el.getBoundingClientRect().width/2);
}

function addRowDragAndDrop(row){
  let guide;
  row.querySelectorAll("input, textarea").forEach(el=>{
    el.addEventListener("mousedown",()=>{ row.draggable=false; });
    el.addEventListener("mouseup",()=>{ row.draggable=true; });
  });

  let lastY=0;
  row.addEventListener("dragstart",(e)=>{
    e.dataTransfer.setData("text/plain","");
    row.classList.add("row-dragging");
    guide=document.createElement("div"); guide.classList.add("row-drag-guide"); comboArea.appendChild(guide);
  });
  row.addEventListener("dragend",(e)=>{
    row.classList.remove("row-dragging");
    if(guide){ 
      const after=getDragAfterRow(comboArea,lastY);
      if(after) comboArea.insertBefore(row,after);
      else comboArea.appendChild(row);
      guide.remove();
    }
  });
  comboArea.addEventListener("dragover",(e)=>{
    e.preventDefault();
    lastY=e.clientY;
    const after=getDragAfterRow(comboArea,lastY);
    if(guide){
      guide.style.display="block";
      guide.style.top= after ? after.getBoundingClientRect().top+"px" : comboArea.getBoundingClientRect().bottom+"px";
    }
  });
}
function getDragAfterRow(container,y){
  const rows=[...container.querySelectorAll(".combo-row:not(.row-dragging)")];
  return rows.find(r=>y<r.getBoundingClientRect().top+r.getBoundingClientRect().height/2);
}

updateImageMap();
startRealtimeListener(currentChar);
</script>
</body>
</html>
